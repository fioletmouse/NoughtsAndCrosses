@{
    ViewBag.Title = "Index";
}

<table id="outer">
    <tr>
        <td width="50" height="50"><div onclick="getajax(this)" row="0" col="0">1</div></td>
        <td width="50" height="50"><div onclick="getajax(this)" row="0" col="1">2</div></td>
        <td width="50" height="50"><div onclick="getajax(this)" row="0" col="2">3</div></td>

    </tr>
        <tr>
        <td width="50" height="50"><div onclick="getajax(this)" row="1" col="0">4</div></td>
        <td width="50" height="50"><div onclick="getajax(this)" row="1" col="1">5</div></td>
        <td width="50" height="50"><div onclick="getajax(this)" row="1" col="2">6</div></td>

    </tr>
        <tr>
        <td width="50" height="50"><div  onclick="getajax(this)" row="2" col="0">7</div></td>
        <td width="50" height="50"><div  onclick="getajax(this)" row="2" col="1">8</div></td>
        <td width="50" height="50"><div  onclick="getajax(this)" row="2" col="2">9</div></td>

    </tr>

</table>
<script type="text/javascript" src="~/Scripts/jquery-1.8.2.js"></script>
<script>
    function getajax(tmp) {
      /*  $("div[row=" + response.x + "][col=" + response.y + "]").addClass("player");

        $.ajax({
            url: 'Game/Move',
            type: 'GET',
            data: {
                x: $(tmp).attr("row"),
                y: $(tmp).attr("col")
            },

            success: function (response, status, xhr) {
                if (response.MoveResult != null && response.MoveResult != "") {
                    window.location.href = response.MoveResult;
                }
                $("div[row=" + response.x + "]");
                $("div[row=" + response.x + "][col=" + response.y + "]").addClass("tmp");
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                //show the error somewhere - but this is a bad solution
            }
        })*/
        $(tmp).addClass("player");
        $.ajax({
            url: 'Game/Move',
            type: 'GET',
            data: {
                x: $(tmp).attr("row"),
                y: $(tmp).attr("col")
            },

            success: function (response, status, xhr) {
                $("div[row=" + response.x + "]");
                $("div[row=" + response.x + "][col=" + response.y + "]").addClass("computer");
                if (response.WinnerInfo != null && response.WinnerInfo != "") {
                    alert(response.WinnerInfo);
                    window.location.href = response.RedirectLink;
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                //show the error somewhere - but this is a bad solution
            }
        })
    }
</script>


